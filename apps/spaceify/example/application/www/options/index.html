<!DOCTYPE html>
<html>
<head>
    <title>Example options page</title>
    
    <script>
        var p = window.parent;
        var unique_name = "spaceify/pictureviewer";
        var directory = "options";
        var filename = "options.json";

        // Load saved data
        window.addEventListener("load", function()
        {
            p.spaceifyCore.loadOptions(p.spaceifyUtility.getCookie(p.SESSION_ID_COOKIE), unique_name, directory, filename, function(err, data)
            {
                if(err)                                                     // Failed to load options
                {
                    console.log(err);
                }
                else                                                        // Options succesfully loaded
                {
                    document.getElementById("testinput").value = data.test;
                }
            });
        });

        // Resize page layout if required
        window.addEventListener("resize", function()
        {
        });

        // The event listener functions options page must implement 
        function applyOptions()
        {
            data = {"test": document.getElementById("testinput").value};
            p.spaceifyCore.applyOptions(p.spaceifyUtility.getCookie(p.SESSION_ID_COOKIE), unique_name, directory, filename, data, function(err, data)
            {
                if(err)                                                      // Failed to apply options
                {
                    alert(err.message);
                }
                else if(data)                                                // Options succesfully applied
                {
                    alert("Options saved and applied");
                }
            });
        }

        function saveOptions()
        {
            data = {"test": document.getElementById("testinput").value};
            p.spaceifyCore.saveOptions(p.spaceifyUtility.getCookie(p.SESSION_ID_COOKIE), unique_name, directory, filename, data, function(err, data)
            {
                if(err)                                                      // Failed to save options
                {
                    alert(err.message);
                }
                else if(data)                                                // Options succesfully saved
                {
                    alert("Options saved");
                }
            });
        }

        function closeOptions()
        {
            // Optionally do something here and then close
            p.spaceify.closeOptionsDialog();
        }
    </script>
</head>

<body>
    <label for="testinput">Test option</label>
    <input type="text" id="testinput" value="" style="margin: 10px;"/>
</body>

</html>